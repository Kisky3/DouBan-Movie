<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<!--* DOUBAN MOVIE: INDEX.html 1.0-->
<!--* AUTOR:Xiang Yu-->
<head>
<meta charset="utf-8">
<title>DOUBAN MOVIE INDEX</title>
<!-- JS&CSS-->
<link type="text/css" href="css/bootstrap.min.css" rel="stylesheet"/>
<link type="text/css" href="css/kwicks-slider.css" rel="stylesheet"/>
<link type="text/css" href="css/style.css" rel="stylesheet">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>

<!--Slide JS-->
<script type="text/javascript" src="js/jquery.flexslider-min.js"></script>
<script type="text/javascript" src="js/jquery.kwicks-1.5.1.js"></script>

<!--Star JS-->
<script type="text/javascript" src="js/jquery.raty.min.js"></script>

<!--END JS&CSS-->
</head>
<body>
<!--  Navigation Bar-->
<div>
<div class="nav_title">
<img style="float:left;position:relative" src="img/logo.png">
       <nav class="nav">  
        <ul> 
            <li class="current"><a href="#">Home</a></li>  
            <li><a href="#">Top25</a></li>  
            <li><a href="#">Search</a></li>    
            <li><a href="#">New Movie</a></li>  
        </ul>  
    </nav>   
<nav class="nav">  
       
    </nav>   
</div>
</div>
<!--END Navigation Bar-->

<!--  Slider -->
<div class="container">
  <div class="row">
    <div class="span12">
      <div class="flexslider">
        <ul class="slides">
          <li> <img src="img/slide-1.jpg" alt="" > </li>
          <li> <img src="img/slide-2.jpg" alt="" > </li>
          <li> <img src="img/slide-3.jpg" alt="" > </li>
          <li> <img src="img/slide-4.jpg" alt="" > </li>
          <li> <img src="img/slide-5.jpg" alt="" > </li>
        </ul>
      </div>
      <span id="responsiveFlag"></span> </div>
  </div>
</div>
<!-- END Slider -->

<!--  Words-->
<div class="container">
  <div class="row">
    <div class="col-lg-4">
      <h2><b>{ About }</b><br>
        DouBan Movie </h2>
      <br>
    </div>
    <div class="col-lg-1"> </div>
    <div class="col-lg-7">
      <div class="line">
        <p>DouBan Movie provides you with the most top movies which are in theaters now.You can also write comments of movies and get some information and order movie tickets. We can also recommend the top movie to you according to your records and taste.</p>
        <p style="text-align:center; padding-top:20px;"><a class="btn_login">Login in</a></p>
      </div>
    </div>
  </div>
</div>
<!-- END Words-->

<!-- Top250-->
<div class="white_block">
  <div class="grey_bar"></div>
  <div class="top_movie_title">
    <h2>{ Top Movie 250 }</h2>
    <a class="more_movie" href="#"><span class="glyphicon glyphicon-zoom-in"></span>Read more >> </a>
  </div>
  <div class="top_movie">
      <div class="top_img">
        <div class="movie_border" id="img0"></div>
        <h3 id="title0"></h3>
        <h4 id="genres0"></h4>
        <div class="row">
          <div class="col-lg-6">
            <div id="star0"></div>
          </div>
          <div class="col-lg-4">
            <h5 id="score0"></h5>
          </div>
        </div>
      </div>
      <div class="top_img">
        <div class="movie_border" id="img1"></div>
        <h3 id="title1"></h3>
        <h4 id="genres1"></h4>
        <div class="row">
          <div class="col-lg-6">
            <div id="star1"></div>
          </div>
          <div class="col-lg-4">
            <h5 id="score1"></h5>
          </div>
        </div>
      </div>
      <div class="top_img">
        <div class="movie_border" id="img2"></div>
        <h3 id="title2"></h3>
        <h4 id="genres2"></h4>
        <div class="row">
          <div class="col-lg-6">
            <div id="star2"></div>
          </div>
          <div class="col-lg-4">
            <h5 id="score2"></h5>
          </div>
        </div>
      </div>
      <div class="top_img">
        <div class="movie_border" id="img3"></div>
        <h3 id="title3"></h3>
        <h4 id="genres3"></h4>
        <div class="row">
          <div class="col-lg-6">
            <div id="star3"></div>
          </div>
          <div class="col-lg-4">
            <h5 id="score3"></h5>
          </div>
        </div>
      </div>
    </div>
  </div>
<!--END Top250-->


<script>	
//Get json date list size
function JSONLength(obj) {
var size = 0, key;
for (key in obj) {
if (obj.hasOwnProperty(key)) 
	size++;
}
return size;
};

//Output information about Top250
$(function Top250_Movie(){
   $.ajax({
       type : "get", 
       async: false,
       url : "https://api.douban.com/v2/movie/top250", 
       dataType : "jsonp",
       jsonp: "callback",
       jsonpCallback:"success_jsonpCallback",
       success : function(json){
		   
		  var star_number_List = []; 
		   
         //  circulation to output top250 movie date
		   for(var i = 0; i < 4; i++){
			  var title = json.subjects[i].original_title;
			  var img_url = json.subjects[i].images.small;
			 
				  //output movie title
				 document.getElementById("title"+ i).innerHTML = "<span class='glyphicon glyphicon-bookmark'></span>      " + title;  
				 
			     //output movie img
				 var img = document.createElement("img");
				 img.setAttribute("src",img_url);
				 document.getElementById("img"+i).appendChild(img);
				  
				 //output movie genres
				 var genres_number = JSONLength(json.subjects[0].genres);
			     var genres_content= "";
			     for( var j = 0; j< genres_number; j++){
					 var content = json.subjects[i].genres[j]+"/";
					 genres_content =  genres_content + content;
				 }   
			   
			    //output casts
			    var casts_number = JSONLength(json.subjects[0].casts);
			    var casts_content = "";
			    for(var j = 0; j < casts_number; j++){
					var content = json.subjects[i].casts[j].name + "/";
					casts_content = casts_content + content;
				}
			   document.getElementById("genres" + i).innerHTML = "[ Genres ] : " + genres_content + "<br>[ Casts ] : " + casts_content;
			   
			   //get stars_number
			   star_number=json.subjects[i].rating.average;
			   star_number_List.push(star_number/2);
			   
			   //Out put star numbers
			   $('#star' + i).raty({
					readOnly	: true,
					score		: star_number_List[i]
				});
			   
			   //out put score
			   document.getElementById("score" + i).innerHTML = "Score: " + star_number_List[i];
		  }
		  //END circulation to output top250 movie date
      }
    })
});

// Search movie methord
(function Search_Movie(){
   

});

</script>
</body>
</html>
